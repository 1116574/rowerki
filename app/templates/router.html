{% extends 'base.html' %}

{% block title %}Router{% endblock %}

{% block content %}
    <div id="route">
        <!-- Route start -->

        <img class="travel-icon" src="{{ url_for('static', filename='start-frame.svg') }}" alt='ikona początku podróży'>
        <div class='station'>
            <h3>Początek</h3>
        </div>
        <!-- Item break -->

        <img class="travel-icon" src="{{ url_for('static', filename='line-frame.svg') }}" alt='ikona podróży'>
        <div class='journey'>
            <img src='{{ url_for('static', filename='walk.svg') }}' alt='piechota'> <!-- TODO: translations -->
            {# Doing calc in view is bad buuuut its soo simple #}
            {# Assume speed of 6km/h for walking #}
            <h5>
                {{ (walking[0] * 1000).__format__('.0f') }} metrów
            </h5>
            {# This displays 3 decimal points, eg. 2.34234 -> 2.342 #}
        </div>
        <!-- Item break -->

        
        {% for event in route['route_full'] %}
            {% if event.type == 'journey' %}
                <img class="travel-icon" src="{{ url_for('static', filename='line-frame.svg') }}" alt='ikona podróży'>
                <div class='journey'>
                    <img src='{{ url_for('static', filename='bike.svg') }}' alt='rower'> <!-- TODO: translations -->
                    <h5>
                        {{ (event.duration // 60).__format__('.0f') }} minut {{ (event.duration % 60 // 1).__format__('.0f') }} sekund
                    </h5>
                </div>
            {% else %}
                <img class="travel-icon" src="{{ url_for('static', filename='circle-frame.svg') }}" alt='ikona stacji na trasie'>
                <div class='station'>
                    <h3>{{ event.name }}</h3>
                    <h5>{{ event.short_name }}</h5>
                </div>
            {% endif %}
        <!-- Item break -->
        {% endfor %}

        <img class="travel-icon" src="{{ url_for('static', filename='line-frame.svg') }}" alt='ikona podróży'>
        <div class='journey'>
            <img src="{{ url_for('static', filename='walk.svg') }}" alt='piechota'> <!-- TODO: translations -->
            <h5>
                {{ (walking[1] * 1000).__format__('.0f') }} metrów
            </h5>
        </div>
        <!-- Item break -->

        <img class="travel-icon" src="{{ url_for('static', filename='end-frame.svg') }}" alt='ikona końca trasy'>
        <div class='station'>
            <h3>Koniec</h3>
        </div>
        <!-- Item break -->

    </div>
    <div class='summary'>
        <h3>Razem (na rowerze): {{ (route['total_time'] / 60).__format__('.0f') }} minut</h3>
        <h3><a href="{{ route['google_maps'] }}">Link do trasy w  Google maps</a></h3>
    </div>
{% endblock %}
